{% extends "base.html" %}
{% block content %}

<style>
.details-container{
    max-width:1550px;
    width:97%;
    margin:30px auto;
    background:linear-gradient(135deg,#e8f0ff,#ffffff);
    padding:35px;
    border-radius:16px;
    box-shadow:0 0 22px rgba(0,0,0,0.18);
    min-height:550px;
}

/* Prevent resize animation */
.details-container *{
    transition:none !important;
}

/* Lock layout height */
.detail-item{
    margin:12px 0;
    padding:12px;
    border-radius:8px;
    background:#eef2ff;
    position:relative;
    min-height:58px;   /* key fix */
}

/* View text */
.view-text{
    display:block;
}

/* Edit input overlay (same space as text) */
.edit-input{
    width:100%;
    padding:8px;
    border-radius:6px;
    border:1px solid #666;
    position:absolute;
    left:0;
    top:32px;
    display:none;
}

/* Textarea fixed height */
textarea.edit-input{
    height:120px;
}

/* Top row */
.top-row{
    display:flex;
    align-items:center;
    gap:25px;
    margin-bottom:20px;
}

.logo-box img{
    width:150px;
    height:150px;
    object-fit:contain;
    border-radius:12px;
    border:1px solid #bbb;
    background:white;
}

.details-heading{
    font-size:32px;
    font-weight:800;
    margin:4px;
}

.detail-label{
    font-weight:700;
    color:#222;
}

/* Button area */
.button-area{
    margin-top:25px;
    text-align:center;
}

.btn-main{
    padding:10px 18px;
    border-radius:8px;
    border:none;
    cursor:pointer;
    font-weight:700;
}

.edit-btn{background:#005eff;color:white;}
.save-btn{background:#198754;color:white;display:none;}
.cancel-btn{background:#dc3545;color:white;display:none;}
</style>

<div class="details-container">

    <div class="top-row">
        <div class="logo-box">
            {% if placement.logo %}
            <img src="{{ url_for('static', filename='uploads/logos/' + placement.logo) }}">
            {% else %}
            <img src="{{ url_for('static', filename='uploads/logos/default.png') }}">
            {% endif %}
        </div>

        <h2 class="details-heading">{{ placement.company }}</h2>
    </div>

<form method="POST">
<input type="hidden" name="id" value="{{ placement.id }}">

<div class="detail-item">
<span class="detail-label">Role:</span>
<span class="view-text">{{ placement.role }}</span>
<input class="edit-input" type="text" name="role" value="{{ placement.role }}">
    <datalist id="roleOptions">
  <option value="Software Engineer">
  <option value="Data Analyst">
  <option value="Web Developer">
  <option value="Backend Developer">
  <option value="Frontend Developer">
  <option value="Machine Learning Engineer">
</datalist>
</div>

<div class="detail-item">
<span class="detail-label">Location:</span>
<span class="view-text">{{ placement.location }}</span>
<input class="edit-input" type="text" name="location" value="{{ placement.location }}">
    <datalist id="locationOptions">
  <option value="Bangalore">
  <option value="Hyderabad">
  <option value="Pune">
  <option value="Mumbai">
  <option value="Chennai">
  <option value="Delhi">
  <option value="Remote">
</datalist>
</div>

<div class="detail-item">
<span class="detail-label">Salary:</span>
<span class="view-text">{{ placement.salary }}</span>
<input class="edit-input" type="text" name="salary" value="{{ placement.salary }}">
    <datalist id="salaryOptions">
  <option value="Not Disclosed">
  <option value="3 – 5 LPA">
  <option value="5 – 8 LPA">
  <option value="8 – 12 LPA">
  <option value="Stipend Based">
</datalist>
</div>

<div class="detail-item">
<span class="detail-label">Job Type:</span>
<span class="view-text">{{ placement.job_type }}</span>
<input class="edit-input" type="text" name="job_type" value="{{ placement.job_type }}">
    <datalist id="jobTypeOptions">
  <option value="Full Time">
  <option value="Internship">
  <option value="Part Time">
  <option value="Contract">
</datalist>
</div>

<div class="detail-item">
<span class="detail-label">Duration:</span>
<span class="view-text">{{ placement.duration }}</span>
<input class="edit-input" type="text" name="duration" value="{{ placement.duration }}">
    <datalist id="durationOptions">
  <option value="6 Months">
  <option value="12 Months">
  <option value="2 Years">
  <option value="Permanent">
</datalist>
</div>

<div class="detail-item" style="min-height:155px;">
<span class="detail-label">Eligibility:</span>
<span class="view-text">{{ placement.eligibility }}</span>
<textarea class="edit-input" name="eligibility">{{ placement.eligibility }}</textarea>
</div>

<div class="detail-item" style="min-height:155px;">
<span class="detail-label">Description:</span>
<span class="view-text">{{ placement.description }}</span>
<textarea class="edit-input" name="description">{{ placement.description }}</textarea>
</div>

<div class="detail-item">
<span class="detail-label">Deadline:</span>
<span class="view-text">{{ placement.deadline }}</span>
<input class="edit-input" type="date" name="deadline" value="{{ placement.deadline }}">
</div>

<div class="detail-item">
<span class="detail-label">Apply Link:</span>
<span class="view-text">
{% if placement.link %}
<a href="{{ placement.link }}" target="_blank">{{ placement.link }}</a>
{% else %}No Link Available{% endif %}
</span>
<input class="edit-input" type="text" name="link" value="{{ placement.link }}">
</div>

<div class="button-area">
<button type="button" class="btn-main edit-btn" onclick="enableEdit()">Edit</button>
<button type="submit" class="btn-main save-btn">Save Changes</button>
<button type="button" class="btn-main cancel-btn" onclick="cancelEdit()">Cancel</button>
</div>

</form>
</div>

<script>
function enableEdit(){
document.querySelectorAll(".view-text").forEach(e=>e.style.visibility="hidden");
document.querySelectorAll(".edit-input").forEach(e=>e.style.display="block");
document.querySelector(".edit-btn").style.display="none";
document.querySelector(".save-btn").style.display="inline-block";
document.querySelector(".cancel-btn").style.display="inline-block";
}
function cancelEdit(){ location.reload(); }
</script>

{% endblock %}
