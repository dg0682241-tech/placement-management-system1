{% extends "base.html" %}
{% block content %}
<div class="max-w-7xl mx-auto p-6 mb-8 rounded-xl shadow-xl bg-gradient-to-r 
            from-blue-50 via-white to-blue-50 animate-fadeIn">

  <h2 class="text-3xl font-bold text-gray-800 text-center mb-6">
    ğŸ“ Practice & Quiz Arena
  </h2>

  <!-- MODE BUTTONS -->
  <div class="flex justify-center gap-6 mb-8">
    <button id="modePractice" class="modeBtn bg-blue-600">ğŸ“š Practice</button>
    <button id="modeQuiz" class="modeBtn bg-yellow-600">ğŸ¯ Quiz</button>
    <button class="topicBtn bg-indigo-600" data-topic="courses">ğŸ“ Courses</button>

  </div>

  <!-- TOPIC BOX -->
  <div id="topicBox" class="hidden text-center mb-8">
    <h3 class="text-xl font-semibold mb-4">Choose Topic</h3>
    <div class="flex justify-center flex-wrap gap-4">
      <button class="topicBtn bg-blue-600" data-topic="coding">ğŸ’» Coding</button>
      <button class="topicBtn bg-green-600" data-topic="aptitude">ğŸ”¢ Aptitude</button>
      <button class="topicBtn bg-purple-600" data-topic="reasoning">ğŸ§  Reasoning</button>
      <button class="topicBtn bg-pink-600" data-topic="interview">ğŸ¤ Interview</button>
      <button class="topicBtn bg-orange-600" data-topic="gd">ğŸ—£ Group Discussion</button>
    </div>
  </div>

  <!-- PRACTICE SECTION -->
  <div id="practiceSection" class="hidden">
    <h3 class="text-xl font-semibold mb-4">ğŸ“š Practice Questions</h3>
    <div id="practiceContainer" class="space-y-4 max-h-[420px] overflow-y-auto pr-2"></div>
  </div>
<!-- COURSES SECTION -->
<div id="coursesSection" class="hidden mt-8">
  <div class="bg-white shadow-xl rounded-xl p-6 border min-h-[300px]">

    <h3 class="text-xl font-bold mb-4">
      ğŸ“ Best Courses Video Suggestions
    </h3>

    <div id="courseButtons" class="flex flex-wrap gap-4 mb-6">
      <!-- Course buttons injected by JS -->
    </div>

    <div id="videoList" class="space-y-3">
      <!-- Video links injected by JS -->
    </div>

  </div>
</div>

  <!-- QUIZ SECTION -->
  <div id="quizSection" class="hidden mt-8">

    <!-- Fixed Save Score / Previous Result Button -->
    <button id="openHistory" 
        class="fixed right-6 top-28 bg-blue-600 text-white px-6 py-2 rounded-lg shadow-lg hover:bg-blue-700 transition">
        ğŸ“ History
    </button>

    <h3 class="text-xl font-semibold mb-4">ğŸ¯ Quiz Test</h3>

    <!-- QUIZ CARD -->
    <div class="bg-white shadow-xl rounded-xl p-5 border
                min-h-[380px] flex flex-col justify-between">

      <!-- QUESTIONS CONTAINER -->
      <form id="quizForm" class="space-y-4 overflow-y-auto max-h-[600px] pr-2"></form>

      <!-- SUBMIT BUTTON -->
      <button id="submitQuiz"
          class="hidden w-full mt-4 px-6 py-2 bg-yellow-500 
                 text-white rounded-lg shadow hover:bg-yellow-600 transition">
          Submit Quiz
      </button>

    </div>

    <!-- RESULT PANEL -->
    <div id="quizResult"
        class="hidden mt-6 bg-gray-50 p-5 rounded-xl shadow text-center">

      <h2 class="text-2xl font-bold mb-2">ğŸ‰ Result Summary</h2>

      <p class="text-lg font-semibold text-green-700">
          Correct Answers: <span id="correctCount">0</span>
      </p>

      <p class="text-lg font-semibold text-red-600">
          Wrong Answers: <span id="wrongCount">0</span>
      </p>

      <p class="text-lg font-semibold text-gray-700">
          Not Attempted: <span id="notAttempt">0</span>
      </p>

      <h1 id="emojiResult" class="text-4xl mt-3"></h1>
    </div>

    <!-- HISTORY PANEL (Slide-in from Right) -->
    <div id="historyPanel" class="fixed right-0 top-0 h-full w-96 bg-white shadow-xl p-4 overflow-y-auto hidden z-50">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold">ğŸ“Š Previous Attempts</h3>
        <button id="closeHistory" class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600">Close</button>
      </div>
      <div id="historyList" class="space-y-2 text-sm">
  {% for attempt in attempts %}
    <div class="flex justify-between items-center bg-gray-100 p-2 rounded">
      <span>Score: {{ attempt.score }} | Date: {{ attempt.date }}</span>
      <button class="deleteAttempt px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600"
              data-id="{{ attempt.id }}">
        Delete
      </button>
    </div>
  {% else %}
    No previous attempts yet...
  {% endfor %}
</div>

    </div>

  </div>
</div>

<style>
@keyframes fadeIn {from{opacity:0;transform:translateY(15px);}to{opacity:1;transform:translateY(0);}}
.animate-fadeIn{animation:fadeIn .7s ease-in-out;}

.modeBtn,.topicBtn{
padding:10px 22px;border-radius:10px;color:white;font-weight:700;
box-shadow:0 3px 8px rgba(0,0,0,.2);transition:0.3s;
}
.modeBtn:hover,.topicBtn:hover{transform:scale(1.07);}

.qaBox{
background:white;padding:14px;border-radius:8px;
border-left:6px solid #4f46e5;
}
.ans{
display:none;margin-top:6px;background:#f9fafb;
padding:8px;border-radius:6px;
}
.goodResult{background:#d1fae5;border-left:6px solid #10b981;}
.averageResult{background:#e0f2fe;border-left:6px solid #0ea5e9;}
.badResult{background:#fee2e2;border-left:6px solid #ef4444;}
.bestResult{background:#fef3c7;border-left:6px solid #f59e0b;}
            @media (max-width: 480px) {
  #openHistory {
    position: relative;      /* no longer fixed */
    top: auto;               /* reset top */
    right: auto;             /* reset right */
    display: block;          /* full-width button */
    margin: 0 auto 1rem;     /* center above card with margin-bottom */
    width: 90%;              /* slightly smaller than card */
    text-align: center;
  }
}
</style>

<script src="{{ url_for('static', filename='js/practice.js') }}"></script>

{% endblock %}















