{% extends "base.html" %}
{% block title %}Reports{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto mt-5 mb-10">
  <h1 class="text-4xl font-bold text-indigo-600 text-center mb-8">ðŸ“Š Reports & Analytics</h1>

  <!-- Summary Cards -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-6 text-center">
    <div class="bg-indigo-100 p-6 rounded-xl shadow">
      <h2 class="text-xl font-bold">Students</h2>
      <p class="text-2xl">{{ total_students }}</p>
    </div>
    <div class="bg-green-100 p-6 rounded-xl shadow">
      <h2 class="text-xl font-bold">Placements</h2>
      <p class="text-2xl">{{ total_placements }}</p>
    </div>
    <div class="bg-purple-100 p-6 rounded-xl shadow">
      <h2 class="text-xl font-bold">Applications</h2>
      <p class="text-2xl">{{ total_applications }}</p>
    </div>
    <div class="bg-yellow-100 p-6 rounded-xl shadow">
      <h2 class="text-xl font-bold">Success Rate</h2>
      <p class="text-2xl">{{ success_rate }}%</p>
    </div>
  </div>

  <!-- Charts -->
  <div class="mt-10 grid grid-cols-1 md:grid-cols-2 gap-8">
    <div class="bg-white p-6 rounded-xl shadow">
      <h3 class="text-lg font-semibold mb-4">Applications by Status</h3>
      <canvas id="statusChart"></canvas>
    </div>
    <div class="bg-white p-6 rounded-xl shadow">
      <h3 class="text-lg font-semibold mb-4">Placements vs Students</h3>
      <canvas id="placementChart"></canvas>
    </div>
  </div>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Status breakdown chart
  const statusData = {{ status_counts | tojson }};
  new Chart(document.getElementById("statusChart"), {
    type: "bar",
    data: {
      labels: Object.keys(statusData),
      datasets: [{
        label: "Applications",
        data: Object.values(statusData),
        backgroundColor: ["#4f46e5", "#10b981", "#f59e0b", "#ef4444"]
      }]
    }
  });

  // Placements vs Students
  new Chart(document.getElementById("placementChart"), {
    type: "pie",
    data: {
      labels: ["Students", "Placements"],
      datasets: [{
        data: [{{ total_students }}, {{ total_placements }}],
        backgroundColor: ["#6366f1", "#22c55e"]
      }]
    }
  });
</script>
{% endblock %}

